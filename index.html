<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Best Medical Community (BMC) - كورس الذكاء الاصطناعي الطبي</title>
  <meta name="description" content="منصة كورس BMC: الذكاء الاصطناعي في الطب، تتبّع التقدم، MP3 + PDF، وامتحان نهائي MCQ 70 سؤال." />
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="assets/icons/favicon.ico">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
  <meta name="theme-color" content="#0d6efd" />
  <link rel="stylesheet" href="assets/css/styles.css" />
  <script>
    // تسجيل Service Worker لـ PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js').catch(console.error);
      });
    }
  </script>
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <img src="assets/icons/logo-bmc.svg" alt="BMC Logo" class="logo" />
      <div class="brand-text">
        <h1 class="title">Best Medical Community</h1>
        <p class="subtitle">BMC - الذكاء الاصطناعي في الطب</p>
      </div>
    </div>

    <div class="progress-area" aria-label="شريط التقدّم">
      <div class="progress-info">
        <span id="unitsCount">0/0 وحدات</span>
        <span id="progressPercent">0%</span>
      </div>
      <div class="progress-bar">
        <div id="progressFill" class="progress-fill" style="width:0%"></div>
      </div>
    </div>
  </header>

  <main class="container">
    <aside class="sidebar" aria-label="قائمة الوحدات">
      <div class="sidebar-header">
        <h2>قائمة الوحدات</h2>
        <input id="unitSearch" type="search" placeholder="ابحث عن وحدة..." aria-label="بحث" />
      </div>
      <ul id="unitsList" class="units-list" role="list"></ul>

      <button id="finalExamBtn" class="final-exam-btn" disabled hidden>
        ابدأ الامتحان النهائي — MCQ (70 سؤال)
      </button>
    </aside>

    <section class="content" aria-live="polite">
      <div class="unit-meta">
        <h2 id="unitTitle">مرحبًا بك في كورس BMC</h2>
        <p id="unitPath">اختر وحدة من القائمة لبدء الدراسة.</p>
      </div>

      <div class="media-grid">
        <div class="card">
          <h3>ملف صوتي (MP3)</h3>
          <audio id="unitAudio" controls preload="none">
            <source id="unitAudioSrc" src="" type="audio/mpeg">
            متصفحك لا يدعم تشغيل الصوت.
          </audio>
          <div class="actions">
            <a id="downloadAudio" href="#" download class="btn btn-secondary" aria-disabled="true">تحميل الصوت</a>
          </div>
        </div>

        <div class="card">
          <h3>ملف PDF</h3>
          <div class="pdf-frame">
            <iframe id="unitPdf" title="عرض PDF" loading="lazy"></iframe>
          </div>
          <div class="actions">
            <a id="openPdf" href="#" target="_blank" rel="noopener" class="btn btn-secondary" aria-disabled="true">فتح PDF في تبويب جديد</a>
          </div>
        </div>
      </div>

      <div class="complete-area">
        <button id="completeUnitBtn" class="btn btn-primary" disabled>تم إنجاز الوحدة</button>
        <span id="completeState" class="complete-state"></span>
      </div>
    </section>
  </main>

  <!-- زر واتساب عائم ثابت -->
  <a
    id="whatsAppFloating"
    class="whatsapp-fab"
    href="https://wa.me/c/249906933335"
    target="_blank"
    rel="noopener"
    aria-label="تواصل عبر واتساب"
    title="تواصل عبر واتساب">
    <!-- ملاحظة: لتغيير رقم/رابط واتساب مستقبلًا، غيّر قيمة href هنا (مثال: https://wa.me/<phone>) -->
    <svg viewBox="0 0 32 32" aria-hidden="true" focusable="false">
      <path fill="currentColor" d="M19.11 17.73c-.27-.13-1.6-.79-1.85-.88-.25-.09-.43-.13-.61.13-.18.27-.7.88-.86 1.06-.16.18-.32.2-.59.07-.27-.13-1.14-.42-2.17-1.34-.8-.71-1.34-1.59-1.5-1.85-.16-.27-.02-.41.11-.54.11-.11.25-.27.36-.41.12-.14.16-.23.23-.39.07-.16.04-.29-.02-.41-.07-.13-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.46h-.52c-.18 0-.41.06-.63.29-.22.22-.83.81-.83 1.98 0 1.17.85 2.3.97 2.46.11.16 1.67 2.55 4.04 3.58 1.42.61 1.97.67 2.67.57.43-.06 1.6-.65 1.82-1.29.23-.63.23-1.17.16-1.29-.06-.11-.25-.18-.52-.3zM26.7 5.3C23.9 2.5 20.2 1 16.3 1 8.8 1 2.7 7.1 2.7 14.6c0 2.3.6 4.5 1.8 6.5L2 31l10.1-2.6c1.9 1 4 1.5 6.2 1.5 7.5 0 13.6-6.1 13.6-13.6 0-3.9-1.5-7.6-4.3-10.5zM16.3 27.9c-1.9 0-3.7-.5-5.3-1.4l-.4-.2-6 .1 1.3-5.9-.3-.4c-1.1-1.8-1.7-3.9-1.7-6.1 0-6.6 5.4-12 12-12 3.2 0 6.2 1.2 8.5 3.5 2.3 2.3 3.6 5.3 3.6 8.5 0 6.6-5.4 12-12 12z"/>
    </svg>
  </a>

  <script src="assets/js/app.js" defer></script>
</body>
</html>